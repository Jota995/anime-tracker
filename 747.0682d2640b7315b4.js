"use strict";(self.webpackChunkanime_tracker=self.webpackChunkanime_tracker||[]).push([[747],{4747:(fe,A,a)=>{a.r(A),a.d(A,{AnimeSearchModule:()=>pe});var u=a(9808),p=a(9842),e=a(1223);function Z(t,i,n,o,s,r,l){try{var m=t[r](l),f=m.value}catch(de){return void n(de)}m.done?i(f):Promise.resolve(f).then(o,s)}var y=a(7579),C=a(4482),v=a(5403),F=a(8421),b=a(5032),q=a(9300),w=a(6805),J=a(930);function T(t,i){const n="object"==typeof i;return new Promise((o,s)=>{const r=new J.Hp({next:l=>{o(l),r.unsubscribe()},error:s,complete:()=>{n?o(i.defaultValue):s(new w.K)}});t.subscribe(r)})}var x=a(8534),c=a(2382),g=(()=>{return(t=g||(g={})).G="All Ages",t.PG="Children",t.PG_13="Teens 13 or older",t.R="17+ (violence & profanity)",t.R_PLUS="Mild Nudity",t.RX="Hentai",g;var t})(),d=(()=>{return(t=d||(d={}))[t.Appalling=1]="Appalling",t[t.Horrible=2]="Horrible",t[t.VeryBad=3]="VeryBad",t[t.Bad=4]="Bad",t[t.Average=5]="Average",t[t.Fine=6]="Fine",t[t.Good=7]="Good",t[t.VeryGood=8]="VeryGood",t[t.Great=9]="Great",t[t.Masterpiece=10]="Masterpiece",d;var t})(),_=(()=>{return(t=_||(_={})).airing="airing",t.complete="complete",t.upcoming="upcoming",_;var t})(),h=(()=>{return(t=h||(h={})).tv="tv",t.movie="movie",t.ova="ova",t.special="special",t.ona="ona",t.music="music",h;var t})(),P=a(1135),N=a(4004),R=a(8746),Y=a(520);let Q=(()=>{class t{constructor(n){this.http=n,this.API_URL="https://api.jikan.moe/v4/producers",this.producers_response$=new y.x,this.is_loading=new P.X(!1)}getProducers(){return this.is_loading.next(!0),this.http.get(`${this.API_URL}`).pipe((0,N.U)(n=>n.data),(0,R.x)(()=>this.is_loading.next(!1)))}addResultProducers(n){this.producers_response$.next(n)}getResultProducers(){return this.producers_response$.asObservable()}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(Y.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function I(t,i){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function $(t,i){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function L(t,i){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.index),e.xp6(1),e.AsE("",n.index," - ",n.value,"")}}function j(t,i){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function G(t,i){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n.titles[0].title),e.xp6(1),e.Oqu(n.titles[0].title)}}let z=(()=>{class t{constructor(n){this.producerService=n,this.animeStatus=Object.values(_),this.animeType=Object.values(h),this.animeRatings=Object.values(g),this.scores=[]}ngOnInit(){this.scores=Object.keys(d).filter(n=>!isNaN(Number(d[n]))).map(n=>({index:d[n],value:n})),T(this.producerService.getProducers()).then(n=>{console.log("anume productores",n),this.animeProducers=n})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Q))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-filter"]],inputs:{form:"form"},decls:66,vars:6,consts:[[1,"row",3,"formGroup"],[1,"col-md-12"],[1,"row"],[1,"col-md-12","d-flex","justify-content-between"],[1,"col-auto"],[1,"col-form-label"],["formControlName","type","aria-label","Default select example",1,"form-select"],["value","null","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","status","aria-label","Default select example",1,"form-select"],["formControlName","score","aria-label","Default select example",1,"form-select"],["formControlName","rated","aria-label","Default select example",1,"form-select"],["formControlName","producers","aria-label","Default select example",1,"form-select"],["type","date","formControlName","start_date",1,"form-control"],["type","date","formControlName","end_date",1,"form-control"],[3,"value"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div"),e._uU(5,"Filtros"),e.qZA(),e.TgZ(6,"div"),e._uU(7,"Limpiar Filtros"),e.qZA()()()(),e.TgZ(8,"div",1)(9,"div",2)(10,"div",4)(11,"label",5),e._uU(12,"Type"),e.qZA()(),e.TgZ(13,"div",4)(14,"select",6)(15,"option",7),e._uU(16,"Select a type"),e.qZA(),e.YNc(17,I,2,2,"option",8),e.qZA()()(),e.TgZ(18,"div",2)(19,"div",4)(20,"label",5),e._uU(21,"Status"),e.qZA()(),e.TgZ(22,"div",4)(23,"select",9)(24,"option",7),e._uU(25,"Select a status"),e.qZA(),e.YNc(26,$,2,2,"option",8),e.qZA()()(),e.TgZ(27,"div",2)(28,"div",4)(29,"label",5),e._uU(30,"Score"),e.qZA()(),e.TgZ(31,"div",4)(32,"select",10)(33,"option",7),e._uU(34,"Select a score"),e.qZA(),e.YNc(35,L,2,3,"option",8),e.qZA()()(),e.TgZ(36,"div",2)(37,"div",4)(38,"label",5),e._uU(39,"Rated"),e.qZA()(),e.TgZ(40,"div",4)(41,"select",11)(42,"option",7),e._uU(43,"Select a rated"),e.qZA(),e.YNc(44,j,2,2,"option",8),e.qZA()()(),e.TgZ(45,"div",2)(46,"div",4)(47,"label",5),e._uU(48,"Producers"),e.qZA()(),e.TgZ(49,"div",4)(50,"select",12)(51,"option",7),e._uU(52,"Select a producer"),e.qZA(),e.YNc(53,G,2,2,"option",8),e.qZA()()(),e.TgZ(54,"div",2)(55,"div",4)(56,"label",5),e._uU(57,"Start date"),e.qZA()(),e.TgZ(58,"div",4),e._UZ(59,"input",13),e.qZA()(),e.TgZ(60,"div",2)(61,"div",4)(62,"label",5),e._uU(63,"End date"),e.qZA()(),e.TgZ(64,"div",4),e._UZ(65,"input",14),e.qZA()()()()),2&n&&(e.Q6J("formGroup",o.form),e.xp6(17),e.Q6J("ngForOf",o.animeType),e.xp6(9),e.Q6J("ngForOf",o.animeStatus),e.xp6(9),e.Q6J("ngForOf",o.scores),e.xp6(9),e.Q6J("ngForOf",o.animeRatings),e.xp6(9),e.Q6J("ngForOf",o.animeProducers))},directives:[c._Y,c.JL,c.sg,c.EJ,c.JJ,c.u,c.YN,c.Kr,u.sg,c.Fj],styles:[""]}),t})(),B=(()=>{class t{constructor(n,o,s,r){this.animeService=n,this.router=o,this.activateRoute=s,this.fb=r,this.destroy$=new y.x}ngOnInit(){var n=this;this.form=this.buildForm(),this.activateRoute.queryParamMap.pipe(function M(t){return(0,C.e)((i,n)=>{(0,F.Xf)(t).subscribe((0,v.x)(n,()=>n.complete(),b.Z)),!n.closed&&i.subscribe(n)})}(this.destroy$),(0,q.h)(o=>null!=o.get("q")&&o.get("q").length>1),function U(t,i){return(0,C.e)((n,o)=>{const s=new Set;n.subscribe((0,v.x)(o,r=>{const l=t?t(r):r;s.has(l)||(s.add(l),o.next(r))})),null==i||i.subscribe((0,v.x)(o,()=>s.clear(),b.Z))})}()).subscribe(function(){var o=function O(t){return function(){var i=this,n=arguments;return new Promise(function(o,s){var r=t.apply(i,n);function l(f){Z(r,o,s,l,m,"next",f)}function m(f){Z(r,o,s,l,m,"throw",f)}l(void 0)})}}(function*(s){var r;n.searchFilter={status:s.get("status")||"",type:s.get("type")||"",q:(null===(r=s.get("q"))||void 0===r?void 0:r.trim())||""},n.form.patchValue(n.searchFilter),yield T(n.animeService.getAnimes(n.searchFilter)).then(l=>{var m;console.log("anime result",l),n.animeService.addResultAnime(l||[]),n.searchTerm=(null===(m=s.get("q"))||void 0===m?void 0:m.trim())||""})});return function(s){return o.apply(this,arguments)}}())}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}buildForm(){return this.fb.group({q:[null],type:[null],status:[null],score:[null],rated:[null],producers:[null],start_date:[null],end_date:[null]})}searchAnime(){console.log("form",this.form.getRawValue()),this.form.patchValue({q:this.searchTerm}),this.router.navigate(["/browse-anime"],{queryParams:this.form.getRawValue()})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x.o),e.Y36(p.F0),e.Y36(p.gz),e.Y36(c.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-search-anime"]],decls:5,vars:2,consts:[[1,"search-form",3,"ngSubmit"],["type","text","placeholder","search for an anime","name","search",3,"ngModel","ngModelChange"],["type","submit",1,"button"],[3,"form"]],template:function(n,o){1&n&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.searchAnime()}),e.TgZ(1,"input",1),e.NdJ("ngModelChange",function(r){return o.searchTerm=r}),e.qZA(),e.TgZ(2,"button",2),e._uU(3,"Search Anime"),e.qZA(),e._UZ(4,"app-search-filter",3),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngModel",o.searchTerm),e.xp6(3),e.Q6J("form",o.form))},directives:[c._Y,c.JL,c.F,c.Fj,c.JJ,c.On,z],styles:[".search-form[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;justify-content:center;margin-bottom:20px}.search-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{min-width:200px;max-width:450px}"]}),t})();var E=a(727);function D(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"..."),e.qZA())}function H(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"..."),e.qZA())}function V(t,i){if(1&t&&(e.TgZ(0,"p",16),e._uU(1),e.ALo(2,"slice"),e.YNc(3,H,2,0,"span",11),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,2,n.synopsis,0,60)),e.xp6(2),e.Q6J("ngIf",n.synopsis.length>60)}}function X(t,i){if(1&t&&(e.TgZ(0,"small",17),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(n.name)}}function k(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"small",7),e._uU(4),e.qZA(),e._UZ(5,"img",8),e.qZA(),e.TgZ(6,"div",9)(7,"a",10),e._uU(8),e.ALo(9,"slice"),e.YNc(10,D,2,0,"span",11),e.qZA(),e.YNc(11,V,4,6,"p",12),e.TgZ(12,"div",13),e.YNc(13,X,2,1,"small",14),e.qZA(),e.TgZ(14,"button",15),e.NdJ("click",function(){const r=e.CHM(n).$implicit;return e.oxw(2).addToMyAnimeList(r)}),e._uU(15,"Add to My Anime"),e.qZA()()()()}if(2&t){const n=i.$implicit;e.xp6(2),e.MGl("routerLink","/anime-detail/",n.mal_id,""),e.xp6(2),e.Oqu(n.type),e.xp6(1),e.Q6J("src",n.images.jpg.image_url,e.LSH),e.xp6(2),e.MGl("routerLink","/anime-detail/",n.mal_id,""),e.xp6(1),e.Oqu(e.Dn7(9,8,n.title,0,40)),e.xp6(2),e.Q6J("ngIf",n.title.length>40),e.xp6(1),e.Q6J("ngIf",n.synopsis),e.xp6(2),e.Q6J("ngForOf",n.genres.slice(0,2))}}function W(t,i){if(1&t&&(e.TgZ(0,"div",2),e.YNc(1,k,16,12,"div",3),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.resultAnimes)}}function K(t,i){1&t&&(e.TgZ(0,"div",18)(1,"div",19)(2,"span",20),e._uU(3,"Loading..."),e.qZA()()())}let ee=(()=>{class t{constructor(n){this.animeService=n,this.subs=new E.w0,this.ResultAnimes$=this.animeService.getResultAnime(),this.isLoading=!1}ngOnInit(){this.subs.add(this.animeService.is_loading.subscribe(n=>this.isLoading=n)),this.subs.add(this.ResultAnimes$.subscribe(n=>this.resultAnimes=n))}ngOnDestroy(){this.subs.unsubscribe()}addToMyAnimeList(n){this.animeService.animeSelected({id:n.mal_id,title:n.title,image:n.images.jpg.image_url,total_episodes:n.episodes,watched_episodes:0})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-result-anime"]],decls:3,vars:2,consts:[["class","results row",4,"ngIf","ngIfElse"],["cargando",""],[1,"results","row"],["class","col-xl-4 col-lg-4 col-md-6 col-sm-12 col-12 p-0 m-0 p-2",4,"ngFor","ngForOf"],[1,"col-xl-4","col-lg-4","col-md-6","col-sm-12","col-12","p-0","m-0","p-2"],[1,"result"],[1,"anime-image",3,"routerLink"],[1,"anime-type"],["alt","anime",3,"src"],[1,"details"],[1,"anime-title",3,"routerLink"],[4,"ngIf"],["class","synopsis",4,"ngIf"],[1,"genders"],["class","gender",4,"ngFor","ngForOf"],["type","button",1,"button",3,"click"],[1,"synopsis"],[1,"gender"],[1,"text-center"],["role","status",1,"spinner-border","text-center"],[1,"visually-hidden"]],template:function(n,o){if(1&n&&(e.YNc(0,W,2,1,"div",0),e.YNc(1,K,4,0,"ng-template",null,1,e.W1O)),2&n){const s=e.MAs(2);e.Q6J("ngIf",!o.isLoading)("ngIfElse",s)}},directives:[u.O5,u.sg,p.rH,p.yS],pipes:[u.OU],styles:[".results[_ngcontent-%COMP%]{width:100%;margin:0 auto}.result[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;box-shadow:8px #000;display:flex;width:100%;z-index:0}.result[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:100%;padding-right:10px}.details[_ngcontent-%COMP%]   .genders[_ngcontent-%COMP%]   .gender[_ngcontent-%COMP%]{border-radius:16px;background-color:#000;color:#fff;padding:4px 6px;margin-right:5px}.anime-image[_ngcontent-%COMP%]{position:relative;margin-right:10px;cursor:pointer}.anime-image[_ngcontent-%COMP%]   .anime-type[_ngcontent-%COMP%]{position:absolute;border-radius:16px;min-width:50px;background-color:#707070;color:#fff;font-weight:500;padding:8px;text-align:center}.anime-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:160px;width:120px;border-radius:10px}.synopsis[_ngcontent-%COMP%]{margin:0;font-size:14px}.anime-title[_ngcontent-%COMP%]{font-size:14px;font-weight:700;text-decoration:none;color:#000}.anime-title[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),t})();function te(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().$implicit;return e.oxw(2).increaseWatch(s)}),e._uU(1,"+"),e.qZA()}}function ne(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().$implicit;return e.oxw(2).decreaseWatch(s)}),e._uU(1,"-"),e.qZA()}}function ie(t,i){1&t&&(e.TgZ(0,"span",10),e._uU(1,"Completed"),e.qZA())}function oe(t,i){if(1&t&&(e.TgZ(0,"div",3),e._UZ(1,"img",4),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e._UZ(4,"div",5),e.TgZ(5,"span",6),e._uU(6),e.qZA(),e.YNc(7,te,2,0,"button",7),e.YNc(8,ne,2,0,"button",7),e.YNc(9,ie,2,0,"span",8),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Q6J("src",n.image,e.LSH),e.xp6(2),e.Oqu(n.title),e.xp6(3),e.AsE("",n.watched_episodes," / ",n.total_episodes,""),e.xp6(1),e.Q6J("ngIf",n.total_episodes&&n.watched_episodes!==n.total_episodes),e.xp6(1),e.Q6J("ngIf",n.watched_episodes>0),e.xp6(1),e.Q6J("ngIf",n.total_episodes&&n.watched_episodes===n.total_episodes)}}function se(t,i){if(1&t&&(e.TgZ(0,"div",1),e.YNc(1,oe,10,7,"div",2),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.animesSelected)}}let re=(()=>{class t{constructor(n){this.animeService=n,this.animesSelected=[]}ngOnInit(){this.subscription=this.animeService.getAnimeSelected().subscribe(n=>{this.animesSelected.push(n)})}ngOnDestroy(){this.subscription.unsubscribe()}increaseWatch(n){n.watched_episodes++}decreaseWatch(n){n.watched_episodes--}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(x.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-selected-anime"]],decls:1,vars:1,consts:[["class","myanime",4,"ngIf"],[1,"myanime"],["class","anime",4,"ngFor","ngForOf"],[1,"anime"],[3,"src"],[1,"flex-1"],[1,"episodes"],["type","button","class","button",3,"click",4,"ngIf"],["class","episodes","class","completed",4,"ngIf"],["type","button",1,"button",3,"click"],[1,"completed"]],template:function(n,o){1&n&&e.YNc(0,se,2,1,"div",0),2&n&&e.Q6J("ngIf",o.animesSelected.length>0)},directives:[u.O5,u.sg],styles:[""]}),t})(),S=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-anime-search"]],decls:4,vars:0,consts:[[1,"w-100"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-search-anime")(2,"app-result-anime")(3,"app-selected-anime"),e.qZA())},directives:[B,ee,re],styles:[""]}),t})();const ae=[{path:"",component:S},{path:"browse-anime",component:S}];let ce=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[p.Bz.forChild(ae)],p.Bz]}),t})(),le=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,c.u5,p.Bz],c.u5]}),t})(),ue=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez]]}),t})(),me=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,c.u5,c.UX]]}),t})(),pe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,ce,le,ue,me]]}),t})()}}]);